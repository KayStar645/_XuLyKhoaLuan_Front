<div id="container">
  <div class="functional-list">
    <div class="functional-container row ali-center jus-end functional-wrapper">
      <div class="functional-button">
        <div class="row ali-center calendar-btn">
          <img src="../../.././assets/Images/calendar.png" alt="" />
          <dp-date-picker
            #dayPicker
            mode="day"
            id="day"
            [config]="{
              firstDayOfWeek: 'mo',
              showNearMonthDays: false,
              opens: 'right'
            }"
            class="button"
          ></dp-date-picker>
        </div>
      </div>

      <button class="functional-button">
        <button (click)="onClickPrev()">Tuần trước</button>
      </button>
      <button class="functional-button">
        <button (click)="onClickNext()">Tuần tới</button>
      </button>
    </div>
  </div>

  <div class="relative">
    <table border="1" [cellPadding]="0" [cellSpacing]="0" class="table">
      <thead class="days">
        <tr>
          <th class="time"></th>
          <th *ngFor="let date of dateOfWeek">
            <div class="day" [ngClass]="{ active: compareDate(date) }">
              <p *ngIf="date.getDay() > 0; else sunday">
                Thứ {{ date.getDay() + 1 }}
              </p>
              <ng-template #sunday>Chủ nhật</ng-template>
              <p>{{ format(date) }}</p>
            </div>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr
          [ngClass]="{ hour: time.minute === 0, minute: time.minute > 0 }"
          *ngFor="let time of times; let i = index"
        >
          <ng-container
            *ngIf="time.minute === 0; then hour; else empty"
          ></ng-container>

          <ng-container *ngIf="time.day === 1; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 2; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 3; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 4; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 5; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 6; then schedule; else empty">
          </ng-container>

          <ng-container *ngIf="time.day === 0; then schedule; else empty">
          </ng-container>

          <ng-template #schedule>
            <td
              [rowSpan]="time.rowSpan"
              class="rowSpan"
              id="rowSpan"
              [attr.data-index]="time.index"
            >
              <div class="calendar-item">
                <p class="font-semi" [innerHTML]="time.name"></p>

                <div class="p-t-8">
                  <p>
                    Thời gian:
                    <span class="font-semi"
                      >{{ time.hour }}:{{ time.minute }} - {{ time.hourEnd }}:{{
                        time.minuteEnd
                      }}</span
                    >
                  </p>
                  <p>
                    Địa điểm:
                    <span class="font-semi">{{ time.place }}</span>
                  </p>
                </div>
              </div>
            </td>
          </ng-template>

          <ng-template #hour>
            <td class="text-center">
              {{ time.hour < 10 ? "0" + time.hour : time.hour }}:00
            </td>
          </ng-template>

          <ng-template #empty>
            <td></td>
          </ng-template>
        </tr>
      </tbody>
    </table>
  </div>
</div>
